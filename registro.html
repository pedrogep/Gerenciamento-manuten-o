<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Manutenção</title>
<style>
    body {
        text-align: center;
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
    }
    nav {
        background-color: #007bff;
        padding: 10px;
    }
    nav ol {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    nav ol li {
        display: inline;
        margin: 0 15px;
    }
    nav ol li a {
        color: white;
        text-decoration: none;
        font-size: 18px;
        font-weight: bold;
    }
    .container {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        width: 50%;
        margin: 20px auto;
    }
    input, textarea, button {
        display: block;
        width: 100%;
        margin: 10px 0;
        padding: 10px;
    }
    button {
        background-color: #28a745;
        color: white;
        border: none;
        cursor: pointer;
    }
    button:hover {
        background-color: #218838;
    }
    .filter-container {
        margin: 20px auto;
        width: 50%;
    }
    table {
        width: 80%;
        margin: 20px auto;
        border-collapse: collapse;
        background: white;
        border-radius: 10px;
        overflow: hidden;
    }
    th, td {
        padding: 10px;
        border: 1px solid #ddd;
    }
    th {
        background-color: #007bff;
        color: white;
    }
    .delete {
        background-color: #dc3545;
        color: white;
    }
    .delete:hover {
        background-color: #c82333;
    }
</style>
</head>
<body>
    <nav>
        <ol>
            <li><a href="index.html">Inicio</a></li>
            <li><a href="abrir_chamado.html">Abrir Chamado</a></li>
            <li><a href="registro.html">Registros de manutenção</a></li>
 
        </ol>
    </nav>
    <div class="container">
        <h2>Registro de Manutenção</h2>
        
        <form id="manutencaoForm">
            <label>Máquina:</label>
            <input type="text" id="maquina" required>
            
            <label>Data:</label>
            <input type="date" id="data" required>

            <label>Descrição:</label>
            <textarea id="descricao" required></textarea>

            <button type="submit">Salvar</button>
        </form>
    </div>

    <div class="filter-container">
        <h3>Filtrar por Máquina:</h3>
        <input type="text" id="filtro" onkeyup="filtrarTabela()" placeholder="Digite o nome da máquina">
    </div>

    <table>
        <thead>
            <tr>
                <th>Máquina</th>
                <th>Data</th>
                <th>Descrição</th>
                <th>Ação</th>
            </tr>
        </thead>
        <tbody id="tabelaManutencoes">
            <!-- Dados serão inseridos aqui -->
        </tbody>
    </table>

    <script>
        document.getElementById("manutencaoForm").addEventListener("submit", function(event) {
            event.preventDefault();

            let maquina = document.getElementById("maquina").value;
            let data = document.getElementById("data").value;
            let descricao = document.getElementById("descricao").value;

            let manutencoes = JSON.parse(localStorage.getItem("manutencoes")) || [];
            manutencoes.push({ maquina, data, descricao });

            localStorage.setItem("manutencoes", JSON.stringify(manutencoes));
            atualizarTabela();
            document.getElementById("manutencaoForm").reset();
        });

        function atualizarTabela() {
            let manutencoes = JSON.parse(localStorage.getItem("manutencoes")) || [];
            let tabela = document.getElementById("tabelaManutencoes");
            tabela.innerHTML = "";

            manutencoes.forEach((m, index) => {
                let row = `<tr>
                    <td>${m.maquina}</td>
                    <td>${m.data}</td>
                    <td>${m.descricao}</td>
                    <td><button class="delete" onclick="deletarRegistro(${index})">Excluir</button></td>
                </tr>`;
                tabela.innerHTML += row;
            });
        }

        function deletarRegistro(index) {
            let manutencoes = JSON.parse(localStorage.getItem("manutencoes")) || [];
            manutencoes.splice(index, 1);
            localStorage.setItem("manutencoes", JSON.stringify(manutencoes));
            atualizarTabela();
        }

        function filtrarTabela() {
            let filtro = document.getElementById("filtro").value.toLowerCase();
            let linhas = document.querySelectorAll("#tabelaManutencoes tr");

            linhas.forEach((linha) => {
                let colunaMaquina = linha.cells[0].textContent.toLowerCase();
                linha.style.display = colunaMaquina.includes(filtro) ? "" : "none";
            });
        }

        atualizarTabela(); // Carregar os dados ao abrir a página
    </script>

</body>
</html>
